<!doctype html>
<html lang="ja">
<head>
<link rel="stylesheet" type="text/css" href="index.css" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>新富STREET 謹製ポケモンバトル — 完成版</title>
</head>
<body>
<div class="container">
  <header>
    <h1>新富STREET 謹製ポケモンバトル — Web</h1>
    <div class="small muted">Github Pages 用単一ファイル版。Firebase 設定でオンライン対戦有効。</div>
  </header>

  <div class="panel">
    <div class="flex">
      <div class="col">
        <label>プレイヤー名</label>
        <input id="playerName" value="Player" />
      </div>
      <div class="col">
        <label>部屋パスワード（作成/参加に使用）</label>
        <div style="display:flex;gap:8px">
          <input id="roomPwd" placeholder="部屋のパスワード (任意)" />
          <button id="createRoom">部屋作成</button>
          <button id="joinRoom">部屋に参加</button>
        </div>
        <div class="small muted" id="roomInfo"></div>
      </div>
      <div class="col">
        <label>Firebase 状態（要設定）</label>
        <div class="small muted">以下の <code>FIREBASE_CONFIG</code> をご自身の値に置き換えて、Realtime Database を有効化してください。</div>
      </div>
    </div>
  </div>

  <div class="panel">
    <div class="flex">
      <div style="flex:1">
        <label>手持ちポケモンから3体選択（縦並び表示、各行は横書き）</label>
        <div id="pokemonSelection" class="pokelist"></div>
        <div class="small muted">選択をクリックでON/OFF。3体選択してください。</div>
      </div>
      <div style="flex:1">
        <label>技一覧（1ポケ4つまで選択。縦に並べます）</label>
        <div id="moveSelection" class="pokelist"></div>
        <div class="small muted">技は任意。ただし確定時には各ポケモンに自動で4つ割り当てられます（選択が少ない場合、デフォルト補完）。</div>
      </div>
      <div style="flex:0.8">
        <label>選択状況と操作</label>
        <div id="chosenInfo" class="small"></div>
        <div style="margin-top:10px" class="controls">
          <button id="finalize">手持ちを確定してロビー待機</button>
          <button id="localStart" title="オフラインCPU戦">ローカル対戦開始</button>
        </div>
      </div>
    </div>
  </div>

  <div class="panel battle" id="battleArea" style="display:none">
    <div class="box">
      <div class="row"><div><strong id="myNameUI"></strong></div><div class="muted">残り <span id="myLeft">3</span></div></div>
      <div style="margin-top:8px">
        <div><strong id="myPokeName">-</strong> ： <span id="myHPText">--/--</span></div>
        <div class="hpbar"><div id="myHPBar" class="hpfill" style="width:100%"></div></div>
        <div class="status" id="myStatus">状態: -</div>
        <div class="status" id="myStages">能力変化: -</div>
      </div>
      <div style="margin-top:12px" id="myPartyArea" class="party-row"></div>
    </div>

    <div class="box">
      <div class="row"><div><strong id="opNameUI"></strong></div><div class="muted">残り <span id="opLeft">3</span></div></div>
      <div style="margin-top:8px">
        <div><strong id="opPokeName">-</strong> ： <span id="opHPText">--/--</span></div>
        <div class="hpbar"><div id="opHPBar" class="hpfill" style="width:100%"></div></div>
        <div class="status" id="opStatus">状態: -</div>
        <div class="status" id="opStages">能力変化: -</div>
      </div>
      <div style="margin-top:12px" id="opPartyArea" class="party-row"></div>
    </div>

    <div style="grid-column:1/3" class="box">
      <div class="row">
        <div><strong>バトルメッセージ</strong></div>
        <div id="weatherUI" class="muted">天気: なし</div>
      </div>
      <div id="log" class="log" aria-live="polite"></div>

      <div style="margin-top:8px;display:flex;gap:12px">
        <div style="flex:2">
          <div id="moveButtons" class="moves"></div>
          <div style="margin-top:8px" class="small-muted">技をクリックして選択</div>
        </div>
        <div style="flex:1" class="right-col">
          <button id="switchBtn">ポケモン選択</button>
          <button id="forfeitBtn">降参</button>
          <div class="small-muted">バトルはターン制。CPUは自動交代します。</div>
        </div>
      </div>

    </div>
  </div>

  <footer class="small muted">注意: 実装は教育目的。第8世代の数値をベースにしていますが一部簡略化あり。</footer>
</div>
<script src="index.js"></script>
</body>
</html>


